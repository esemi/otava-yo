<?
$version = $this->cacheVersion();

$this->headLink()->appendStylesheet("/css/jquery-ui-1.10.3.custom.min.css?{$version}");

$this->headScript()->appendFile( "/js/jquery-ui-1.10.3.custom.min.js");
$this->headScript()->appendFile( "/js/ckeditor/ckeditor.js");
$this->headScript()->appendFile( "/js/ckeditor/adapters/jquery.js");

?>

<? if( !empty($this->error) ): ?>
	<p class="error"><?= $this->error; ?></p>
<? endif; ?>

<form enctype="multipart/form-data" name="album-form" method="POST" class="album-form">
	<table>
		<tbody>
			<tr>
				<td>
					<label for="title">Название: </label>
				</td>
				<td>
					<input type="text" name="title" id="title" value="<?= (isset($this->albumData['title'])) ? $this->escape($this->albumData['title']) : ''; ?>" placeholder="Название" maxlength="255"/>
				</td>
			</tr>
			<tr>
				<td>
					<label for="year">Год: </label>
				</td>
				<td>
					<input type="number" name="year" id="year" value="<?= (isset($this->albumData['year'])) ? $this->escape($this->albumData['year']) : ''; ?>" placeholder="Год yyyy" maxlength="4"/>
				</td>
			</tr>
		</tbody>
	</table>
	<div>
		<label for="album_image">Обложка альбома:</label>
		<input name="album_image" id="album_image" type="file"  class="adding-album-image"/>
		<?php if( !empty($this->albumData['img_link']) ): ?>
			<img alt="album cover" title="album cover" src="<?= $this->albumData['img_link']; ?>"/>
		<?php endif; ?>
		<input type="hidden" name="MAX_FILE_SIZE" value="2000000" />
			<p>максимальный размер 2MB, автоматически масштабируется до 222x200 px</p>
	</div>

	<label for="desc" class="desc">Описание: </label><br>
	<textarea class="js-editor-album message" name="desc" id="desc" placeholder="Описание"><?= (isset($this->albumData['desc'])) ? $this->albumData['desc'] : ''; ?></textarea><br>

	<input type="hidden" name="csrf" value="<?= $this->csrfToken(); ?>">
	<input class="submit" type="submit" name="отправить" value="отправить">
</form>